# ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å° - é‡æ„æ‰§è¡ŒæŒ‡å—

## ğŸ¯ é‡æ„æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†ç°æœ‰çš„å•æ–‡ä»¶HTMLé¡¹ç›®é‡æ„ä¸ºç°ä»£åŒ–çš„å‰ç«¯é¡¹ç›®ç»“æ„ï¼Œæå‡ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¼€å‘æ•ˆç‡ã€‚

## ğŸ“‹ é‡æ„å‰å‡†å¤‡

### 1. ç¯å¢ƒæ£€æŸ¥
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬ (éœ€è¦ >= 16.0.0)
node --version

# æ£€æŸ¥npmç‰ˆæœ¬ (éœ€è¦ >= 8.0.0)
npm --version

# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œè¯·å‡çº§
npm install -g npm@latest
```

### 2. å¤‡ä»½ç°æœ‰é¡¹ç›®
```bash
# åˆ›å»ºå¤‡ä»½
cp -r . ../shengnong-platform-backup
```

## ğŸš€ æ‰§è¡Œé‡æ„

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨åŒ–è¿ç§» (æ¨è)

1. **è¿è¡Œè¿ç§»è„šæœ¬**
```bash
# åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
node migrate.js
```

2. **è¿›å…¥æ–°é¡¹ç›®ç›®å½•**
```bash
cd ../shengnong-platform-v2
```

3. **å®‰è£…ä¾èµ–**
```bash
npm install
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¿ç§»

#### æ­¥éª¤1ï¼šåˆ›å»ºæ–°é¡¹ç›®ç»“æ„
```bash
# åˆ›å»ºæ–°é¡¹ç›®ç›®å½•
mkdir ../shengnong-platform-v2
cd ../shengnong-platform-v2

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p public/{images,data}
mkdir -p src/{components/{common,ai-chat,mindmap,portal},pages,services,utils,styles/{components,pages},assets/{fonts,icons,images}}
mkdir -p tests/{unit,integration}
mkdir -p docs scripts config/env
```

#### æ­¥éª¤2ï¼šå¤åˆ¶é…ç½®æ–‡ä»¶
```bash
# å¤åˆ¶package.json (ä»æ–°é¡¹ç›®ç»“æ„ç¤ºä¾‹ä¸­)
cp ../shengnong-platform/æ–°é¡¹ç›®ç»“æ„ç¤ºä¾‹/package.json .

# åˆ›å»ºå…¶ä»–é…ç½®æ–‡ä»¶
touch vite.config.js .eslintrc.js .prettierrc .gitignore
```

#### æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–
```bash
npm install
```

#### æ­¥éª¤4ï¼šè¿ç§»æºä»£ç 
```bash
# å¤åˆ¶ç°æœ‰HTMLæ–‡ä»¶åˆ°ä¸´æ—¶ç›®å½•è¿›è¡Œåˆ†æ
cp ../shengnong-platform/*.html ./temp/

# æ‰‹åŠ¨æå–å’Œé‡æ„ä»£ç  (å‚è€ƒä¸‹é¢çš„ä»£ç è¿ç§»æŒ‡å—)
```

## ğŸ“¦ ä»£ç è¿ç§»æŒ‡å—

### 1. HTMLæ–‡ä»¶è¿ç§»

#### åŸæ–‡ä»¶ï¼šsnITSM.html â†’ æ–°ç»“æ„ï¼šå¤šä¸ªç»„ä»¶

**æå–æ­¥éª¤ï¼š**
1. **HTMLç»“æ„** â†’ `src/pages/HomePage.js`
2. **CSSæ ·å¼** â†’ `src/styles/pages/home.css`
3. **JavaScripté€»è¾‘** â†’ `src/components/portal/SystemGrid.js`

**ç¤ºä¾‹è¿ç§»ï¼š**
```javascript
// src/pages/HomePage.js
export class HomePage {
  constructor() {
    this.systemGrid = new SystemGrid()
    this.searchBar = new SearchBar()
  }
  
  render(container) {
    container.innerHTML = `
      <div class="home-page">
        <!-- è¿ç§»çš„HTMLç»“æ„ -->
      </div>
    `
    
    // æŒ‚è½½å­ç»„ä»¶
    this.systemGrid.mount(container.querySelector('#systemGrid'))
  }
}
```

### 2. CSSæ ·å¼è¿ç§»

#### åŸæ–‡ä»¶ï¼šå†…è”æ ·å¼ â†’ æ–°ç»“æ„ï¼šæ¨¡å—åŒ–CSS

**è¿ç§»ç­–ç•¥ï¼š**
```css
/* src/styles/main.css - å…¨å±€æ ·å¼ */
:root {
  --primary-color: #4A90E2;
  --secondary-color: #FF69B4;
  /* æå–CSSå˜é‡ */
}

/* src/styles/components/chat.css - ç»„ä»¶æ ·å¼ */
.chat-container {
  /* è¿ç§»èŠå¤©ç›¸å…³æ ·å¼ */
}

/* src/styles/pages/home.css - é¡µé¢æ ·å¼ */
.home-page {
  /* è¿ç§»é¦–é¡µæ ·å¼ */
}
```

### 3. JavaScripté€»è¾‘è¿ç§»

#### åŸæ–‡ä»¶ï¼šå†…è”è„šæœ¬ â†’ æ–°ç»“æ„ï¼šæ¨¡å—åŒ–ç»„ä»¶

**è¿ç§»æ¨¡å¼ï¼š**
```javascript
// åŸä»£ç  (HTMLä¸­çš„scriptæ ‡ç­¾)
function sendMessage(message) {
  // åŸå§‹é€»è¾‘
}

// æ–°ä»£ç  (src/services/aiService.js)
export class AIService {
  async sendMessage(message, options = {}) {
    // é‡æ„åçš„é€»è¾‘
  }
}
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯¦è§£

### 1. vite.config.js
```javascript
import { defineConfig } from 'vite'
import legacy from '@vitejs/plugin-legacy'

export default defineConfig({
  plugins: [
    legacy({
      targets: ['defaults', 'not IE 11']
    })
  ],
  server: {
    port: 3000,
    open: true,
    cors: true
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: true
  },
  resolve: {
    alias: {
      '@': '/src'
    }
  }
})
```

### 2. .eslintrc.js
```javascript
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true
  },
  extends: [
    'eslint:recommended',
    'prettier'
  ],
  rules: {
    'no-console': 'warn',
    'no-unused-vars': 'error',
    'prefer-const': 'error'
  }
}
```

### 3. .prettierrc
```json
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

## ğŸ§ª æµ‹è¯•é…ç½®

### 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
```bash
# å•å…ƒæµ‹è¯•ç¤ºä¾‹
mkdir -p tests/unit/components
mkdir -p tests/unit/services
mkdir -p tests/unit/utils
```

### 2. æµ‹è¯•é…ç½® (vitest.config.js)
```javascript
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    environment: 'jsdom',
    globals: true,
    coverage: {
      reporter: ['text', 'json', 'html']
    }
  }
})
```

### 3. ç¤ºä¾‹æµ‹è¯•æ–‡ä»¶
```javascript
// tests/unit/utils/helpers.test.js
import { describe, it, expect } from 'vitest'
import { formatTime, generateId } from '../../../src/utils/helpers.js'

describe('helpers', () => {
  it('should format time correctly', () => {
    const timestamp = 1640995200000 // 2022-01-01 00:00:00
    const formatted = formatTime(timestamp, 'YYYY-MM-DD')
    expect(formatted).toBe('2022-01-01')
  })
})
```

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”æ£€æŸ¥è¡¨

### æ ¸å¿ƒåŠŸèƒ½è¿ç§»æ£€æŸ¥

- [ ] **AIåŠ©æ‰‹åŠŸèƒ½**
  - [ ] æµå¼å¯¹è¯
  - [ ] æ¶ˆæ¯ç®¡ç†
  - [ ] å¿«é€Ÿå›å¤
  - [ ] é…ç½®é¢æ¿
  - [ ] å¯¼å‡ºåŠŸèƒ½

- [ ] **æ€ç»´å¯¼å›¾åŠŸèƒ½**
  - [ ] èŠ‚ç‚¹åˆ›å»º/ç¼–è¾‘
  - [ ] æ‹–æ‹½æ“ä½œ
  - [ ] æ’¤é”€/é‡åš
  - [ ] å¯¼å…¥/å¯¼å‡º
  - [ ] æ ·å¼è®¾ç½®

- [ ] **ç³»ç»Ÿé—¨æˆ·åŠŸèƒ½**
  - [ ] ç³»ç»Ÿå¯¼èˆª
  - [ ] æœç´¢è¿‡æ»¤
  - [ ] è§†å›¾åˆ‡æ¢
  - [ ] æ”¶è—ç®¡ç†
  - [ ] ç»Ÿè®¡å±•ç¤º

### æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥

- [ ] **åŠ è½½æ€§èƒ½**
  - [ ] é¦–å±åŠ è½½æ—¶é—´ < 3ç§’
  - [ ] èµ„æºå‹ç¼©å’Œç¼“å­˜
  - [ ] æ‡’åŠ è½½å®ç°
  - [ ] CDNé…ç½®

- [ ] **è¿è¡Œæ—¶æ€§èƒ½**
  - [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–
  - [ ] DOMæ“ä½œä¼˜åŒ–
  - [ ] äº‹ä»¶å¤„ç†ä¼˜åŒ–
  - [ ] åŠ¨ç”»æ€§èƒ½

### å…¼å®¹æ€§æ£€æŸ¥

- [ ] **æµè§ˆå™¨å…¼å®¹æ€§**
  - [ ] Chrome 80+
  - [ ] Firefox 75+
  - [ ] Safari 13+
  - [ ] Edge 80+

- [ ] **è®¾å¤‡å…¼å®¹æ€§**
  - [ ] æ¡Œé¢ç«¯
  - [ ] å¹³æ¿ç«¯
  - [ ] ç§»åŠ¨ç«¯
  - [ ] å“åº”å¼å¸ƒå±€

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### 2. æ„å»ºå¤±è´¥
```bash
# æ£€æŸ¥è¯­æ³•é”™è¯¯
npm run lint

# ä¿®å¤å¯è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜
npm run lint:fix

# æ£€æŸ¥ç±»å‹é”™è¯¯
npm run type-check
```

### 3. å¼€å‘æœåŠ¡å™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000

# ä½¿ç”¨å…¶ä»–ç«¯å£
npm run dev -- --port 3001
```

### 4. æ ·å¼ä¸¢å¤±
- æ£€æŸ¥CSSæ–‡ä»¶å¯¼å…¥è·¯å¾„
- ç¡®è®¤CSSå˜é‡å®šä¹‰
- éªŒè¯å“åº”å¼æ–­ç‚¹

### 5. åŠŸèƒ½å¼‚å¸¸
- æ£€æŸ¥äº‹ä»¶ç»‘å®š
- éªŒè¯APIé…ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### 1. æ„å»ºåˆ†æ
```bash
# åˆ†ææ‰“åŒ…ä½“ç§¯
npm run analyze

# æŸ¥çœ‹ä¾èµ–å…³ç³»
npm ls --depth=0
```

### 2. è¿è¡Œæ—¶ç›‘æ§
```javascript
// æ€§èƒ½ç›‘æ§ä»£ç ç¤ºä¾‹
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    console.log('Performance:', entry.name, entry.duration)
  }
})

observer.observe({ entryTypes: ['measure', 'navigation'] })
```

## ğŸ‰ é‡æ„å®ŒæˆéªŒè¯

### 1. åŠŸèƒ½éªŒè¯
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
# - AIåŠ©æ‰‹å¯¹è¯
# - æ€ç»´å¯¼å›¾æ“ä½œ
# - ç³»ç»Ÿé—¨æˆ·å¯¼èˆª
# - å“åº”å¼å¸ƒå±€
```

### 2. æ€§èƒ½éªŒè¯
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview

# ä½¿ç”¨Lighthouseæ£€æµ‹æ€§èƒ½
```

### 3. ä»£ç è´¨é‡éªŒè¯
```bash
# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
npm run lint
npm run test
npm run type-check
```

## ğŸ“š åç»­ä¼˜åŒ–å»ºè®®

### 1. çŸ­æœŸä¼˜åŒ– (1-2å‘¨)
- [ ] æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
- [ ] å®Œå–„é”™è¯¯å¤„ç†
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€

### 2. ä¸­æœŸä¼˜åŒ– (1-2æœˆ)
- [ ] å®ç°PWAåŠŸèƒ½
- [ ] æ·»åŠ ç¦»çº¿æ”¯æŒ
- [ ] é›†æˆCI/CDæµç¨‹
- [ ] æ€§èƒ½ç›‘æ§ç³»ç»Ÿ

### 3. é•¿æœŸè§„åˆ’ (3-6æœˆ)
- [ ] å¾®å‰ç«¯æ¶æ„
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¸»é¢˜ç³»ç»Ÿ
- [ ] æ’ä»¶æœºåˆ¶

## ğŸ¤ å›¢é˜Ÿåä½œ

### 1. å¼€å‘è§„èŒƒ
- ä½¿ç”¨ç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–å·¥å…·
- éµå¾ªGitæäº¤è§„èŒƒ
- è¿›è¡Œä»£ç å®¡æŸ¥
- ç¼–å†™æŠ€æœ¯æ–‡æ¡£

### 2. éƒ¨ç½²æµç¨‹
- å¼€å‘ç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²
- æµ‹è¯•ç¯å¢ƒæ‰‹åŠ¨éƒ¨ç½²
- ç”Ÿäº§ç¯å¢ƒå®¡æ‰¹éƒ¨ç½²
- å›æ»šæœºåˆ¶å‡†å¤‡

---

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥æˆåŠŸå°†ç°æœ‰é¡¹ç›®é‡æ„ä¸ºç°ä»£åŒ–çš„å‰ç«¯é¡¹ç›®ã€‚å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯å›¢é˜Ÿã€‚