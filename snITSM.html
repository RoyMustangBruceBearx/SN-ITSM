<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å°</title>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡åº“ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* ==================== åŸºç¡€æ ·å¼é‡ç½® ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ==================== ä¸»ä½“æ ·å¼ ==================== */
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            /* æ¸å˜èƒŒæ™¯ + å†œç”°èƒŒæ™¯å›¾ç‰‡ */
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.85) 0%, rgba(46, 58, 89, 0.9) 100%), url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat fixed;
            min-height: 100vh;
            color: #333;
        }

        /* ==================== å¸ƒå±€å®¹å™¨ ==================== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ==================== å¤´éƒ¨åŒºåŸŸæ ·å¼ ==================== */
        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px); /* æ¯›ç»ç’ƒæ•ˆæœ */
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

            .header h1 {
                font-size: 2.8rem;
                /* å½©è‰²æ¸å˜æ–‡å­—æ•ˆæœ */
                background: linear-gradient(45deg, #DC143C, #FF6B6B, #228B22);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 10px;
                font-weight: 700;
            }

            .header .subtitle {
                font-size: 1.2rem;
                color: #2E3A59;
                margin-bottom: 20px;
                font-weight: 500;
            }

        /* ç»Ÿè®¡ä¿¡æ¯æ¡ */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2E3A59;
            font-size: 0.9rem;
            font-weight: 500;
        }

            .stat-item i {
                color: #DC143C;
            }

        /* ==================== æ§åˆ¶é¢æ¿æ ·å¼ ==================== */
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* æœç´¢æ¡†æ ·å¼ */
        .search-box {
            flex: 1;
            max-width: 400px;
            position: relative;
        }

            .search-box input {
                width: 100%;
                padding: 12px 45px 12px 20px;
                border: 2px solid #e0e0e0;
                border-radius: 25px;
                font-size: 16px;
                transition: all 0.3s ease;
            }

                .search-box input:focus {
                    outline: none;
                    border-color: #DC143C;
                    box-shadow: 0 0 15px rgba(220, 20, 60, 0.3);
                }

            .search-box button {
                position: absolute;
                right: 5px;
                top: 50%;
                transform: translateY(-50%);
                background: linear-gradient(45deg, #DC143C, #FF6B6B);
                border: none;
                border-radius: 50%;
                width: 35px;
                height: 35px;
                color: white;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 2px 8px rgba(220, 20, 60, 0.3);
            }

                .search-box button:hover {
                    background: linear-gradient(45deg, #B71C1C, #DC143C);
                    transform: translateY(-50%) scale(1.05);
                    box-shadow: 0 4px 12px rgba(220, 20, 60, 0.4);
                }

        /* è§†å›¾æ§åˆ¶æŒ‰é’® */
        .view-controls {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            padding: 10px 15px;
            border: 2px solid #4A90E2;
            border-radius: 10px;
            background: rgba(74, 144, 226, 0.1);
            color: #4A90E2;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

            .view-btn.active {
                background: linear-gradient(45deg, #4A90E2, #87CEEB);
                color: white;
                border-color: #4A90E2;
                box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
            }

            .view-btn:hover:not(.active) {
                background: rgba(74, 144, 226, 0.2);
                border-color: #DC143C;
                color: #DC143C;
            }

        /* ==================== ç³»ç»Ÿå¡ç‰‡ç½‘æ ¼æ ·å¼ ==================== */
        .systems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        /* ç³»ç»Ÿå¡ç‰‡æ ·å¼ */
        .system-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            position: relative;
            overflow: hidden;
            opacity: 1;
            transform: scale(1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

            /* éšè—çŠ¶æ€çš„å¡ç‰‡ï¼ˆç”¨äºæœç´¢è¿‡æ»¤ï¼‰ */
            .system-card.hidden {
                opacity: 0;
                transform: scale(0.8);
                pointer-events: none;
            }

            /* å¡ç‰‡é¡¶éƒ¨å½©è‰²æ¡ï¼ˆæ‚¬åœæ—¶æ˜¾ç¤ºï¼‰ */
            .system-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(45deg, #DC143C, #FF6B6B, #4A90E2, #228B22);
                transform: scaleX(0);
                transition: transform 0.3s ease;
            }

            .system-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            }

                .system-card:hover::before {
                    transform: scaleX(1);
                }

        /* ç³»ç»Ÿå›¾æ ‡æ ·å¼ */
        .system-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #DC143C, #4A90E2, #228B22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .system-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2E3A59;
        }

        .system-desc {
            color: #555;
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 15px;
        }

        /* ç³»ç»ŸçŠ¶æ€æ ‡ç­¾ */
        .system-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            background: linear-gradient(45deg, rgba(34, 139, 34, 0.1), rgba(74, 144, 226, 0.1));
            border: 1px solid #228B22;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #228B22;
            font-weight: 500;
        }

        /* æ”¶è—æŒ‰é’®æ ·å¼ */
        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #ccc;
            cursor: pointer;
            transition: all 0.3s ease;
        }

            .favorite-btn.favorited {
                color: #DC143C;
                text-shadow: 0 0 8px rgba(220, 20, 60, 0.5);
            }

            .favorite-btn:hover {
                transform: scale(1.2);
                color: #FF6B6B;
            }

        /* ==================== é¡µè„šæ ·å¼ ==================== */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            color: #666;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .footer-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .footer-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

            .footer-item i {
                color: #4A90E2;
            }

        /* ==================== åˆ—è¡¨è§†å›¾æ ·å¼ ==================== */
        .list-view .systems-grid {
            display: block;
        }

        .list-view .system-card {
            display: flex;
            align-items: center;
            text-align: left;
            margin-bottom: 15px;
            padding: 20px;
        }

        .list-view .system-icon {
            font-size: 2rem;
            margin-right: 20px;
            margin-bottom: 0;
            flex-shrink: 0;
        }

        .list-view .system-content {
            flex: 1;
        }

        .list-view .system-title {
            margin-bottom: 5px;
        }

        .list-view .system-desc {
            margin-bottom: 0;
        }

        /* ==================== æ— æœç´¢ç»“æœæ ·å¼ ==================== */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #2E3A59;
        }

            .no-results i {
                font-size: 4rem;
                color: #4A90E2;
                margin-bottom: 20px;
                opacity: 0.6;
            }

            .no-results h3 {
                font-size: 1.5rem;
                margin-bottom: 10px;
                color: #2E3A59;
            }

        /* ==================== AIåŠ©æ‰‹æ ·å¼ ==================== */
        .ai-assistant {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
        }

        /* AIæµ®åŠ¨æŒ‰é’® */
        .ai-button {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF69B4, #FF1493, #DC143C);
            border: 3px solid rgba(255, 255, 255, 0.9);
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: aiFloat 3s ease-in-out infinite;
        }

            .ai-button:hover {
                transform: scale(1.1);
                box-shadow: 0 8px 25px rgba(255, 20, 147, 0.6);
            }

            .ai-button:active {
                transform: scale(0.95);
            }

        /* çŒªå¤´è¡¨æƒ…ç¬¦å· */
        .pig-emoji {
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        /* AIæç¤ºæ°”æ³¡ */
        .ai-bubble {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 8px 12px;
            font-size: 12px;
            color: #333;
            white-space: nowrap;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 20, 147, 0.2);
        }

            /* æ°”æ³¡ç®­å¤´ */
            .ai-bubble::after {
                content: '';
                position: absolute;
                bottom: -6px;
                right: 16px;
                width: 0;
                height: 0;
                border-left: 6px solid transparent;
                border-right: 6px solid transparent;
                border-top: 6px solid rgba(255, 255, 255, 0.95);
            }

        .ai-button:hover .ai-bubble {
            opacity: 1;
            transform: translateY(0);
        }

        /* ==================== AIå¯¹è¯ä¾§è¾¹æ æ ·å¼ ==================== */
        .ai-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            width: 380px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(0, 0, 0, 0.1);
            transform: translateX(100%); /* åˆå§‹éšè— */
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
        }

            .ai-sidebar.show {
                transform: translateX(0); /* æ˜¾ç¤ºçŠ¶æ€ */
            }

        /* AIå¯¹è¯å¤´éƒ¨ */
        .ai-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.1), rgba(255, 20, 147, 0.05));
        }

        .ai-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 2px 8px rgba(255, 20, 147, 0.3);
            font-size: 20px;
        }

        .ai-info {
            flex: 1;
        }

            .ai-info h3 {
                margin: 0;
                font-size: 16px;
                font-weight: 600;
                color: #1f2937;
            }

        /* AIåœ¨çº¿çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .ai-status {
            font-size: 12px;
            color: #10b981;
            margin-top: 2px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

            .ai-status::before {
                content: '';
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #10b981;
                animation: pulse 2s infinite;
            }

        /* å…³é—­æŒ‰é’® */
        .ai-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.05);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: #6b7280;
        }

            .ai-close:hover {
                background: rgba(0, 0, 0, 0.1);
                color: #374151;
            }

        /* èŠå¤©åŒºåŸŸ */
        .ai-chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* ==================== èŠå¤©æ¶ˆæ¯æ ·å¼ ==================== */
        .chat-message {
            display: flex;
            gap: 8px;
            align-items: flex-start;
            animation: messageSlide 0.3s ease;
        }

            .chat-message.user {
                flex-direction: row-reverse; /* ç”¨æˆ·æ¶ˆæ¯å³å¯¹é½ */
            }

        /* æ¶ˆæ¯å¤´åƒ */
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

            .message-avatar.ai {
                background: linear-gradient(135deg, #FF69B4, #FF1493);
                color: white;
                border: 2px solid rgba(255, 255, 255, 0.8);
            }

            .message-avatar.user {
                background: linear-gradient(135deg, #4A90E2, #2563eb);
                color: white;
            }

        /* æ¶ˆæ¯å†…å®¹ */
        .message-content {
            max-width: 280px;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }

            .message-content.ai {
                background: rgba(249, 250, 251, 0.8);
                color: #374151;
                border-top-left-radius: 6px; /* AIæ¶ˆæ¯å·¦ä¸Šè§’åœ†è§’å‡å° */
            }

            .message-content.user {
                background: linear-gradient(135deg, #4A90E2, #2563eb);
                color: white;
                border-top-right-radius: 6px; /* ç”¨æˆ·æ¶ˆæ¯å³ä¸Šè§’åœ†è§’å‡å° */
            }

        /* æ¶ˆæ¯æ—¶é—´ */
        .message-time {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 4px;
            text-align: center;
        }

        /* ==================== AIè¾“å…¥åŒºåŸŸæ ·å¼ ==================== */
        .ai-input-area {
            padding: 16px 20px 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            background: rgba(255, 255, 255, 0.95);
        }

        /* å¿«æ·å›å¤æŒ‰é’® */
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .quick-reply {
            padding: 6px 12px;
            background: rgba(255, 20, 147, 0.1);
            border: 1px solid rgba(255, 20, 147, 0.2);
            border-radius: 16px;
            font-size: 12px;
            color: #FF1493;
            cursor: pointer;
            transition: all 0.2s ease;
        }

            .quick-reply:hover {
                background: rgba(255, 20, 147, 0.2);
                transform: translateY(-1px);
            }

        /* è¾“å…¥å®¹å™¨ */
        .input-container {
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }

        /* AIè¾“å…¥æ¡† */
        .ai-input {
            flex: 1;
            min-height: 40px;
            max-height: 120px;
            padding: 10px 16px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            font-size: 14px;
            resize: none;
            outline: none;
            transition: all 0.2s ease;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.9);
        }

            .ai-input:focus {
                border-color: #FF1493;
                box-shadow: 0 0 0 3px rgba(255, 20, 147, 0.1);
            }

        /* å‘é€æŒ‰é’® */
        .send-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: white;
            font-size: 16px;
        }

            .send-button:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 12px rgba(255, 20, 147, 0.4);
            }

            .send-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none;
            }

        /* ==================== åŠ¨ç”»æ•ˆæœ ==================== */

        /* AIæŒ‰é’®æµ®åŠ¨åŠ¨ç”» */
        @keyframes aiFloat {
            0%, 100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        /* çŠ¶æ€æŒ‡ç¤ºå™¨è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        /* æ¶ˆæ¯æ»‘å…¥åŠ¨ç”» */
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ==================== å“åº”å¼è®¾è®¡ ==================== */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .systems-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .control-panel {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                max-width: none;
            }

            .stats-bar {
                gap: 20px;
            }

            .footer-info {
                gap: 20px;
            }

            /* ç§»åŠ¨ç«¯AIä¾§è¾¹æ å…¨å±æ˜¾ç¤º */
            .ai-sidebar {
                width: 100vw;
            }

            .ai-assistant {
                bottom: 20px;
                right: 20px;
            }

            .ai-button {
                width: 56px;
                height: 56px;
            }

            .pig-emoji {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ==================== å¤´éƒ¨åŒºåŸŸ ==================== -->
        <header class="header">
            <h1><i class="fas fa-piggy-bank"></i> ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å°</h1>
            <p class="subtitle">ç°ä»£å†œç‰§ä¸š Â· æ™ºæ…§ç®¡ç† Â· æ•°å­—æœªæ¥</p>
            <!-- å®æ—¶ç»Ÿè®¡ä¿¡æ¯æ  -->
            <div class="stats-bar">
                <div class="stat-item">
                    <i class="fas fa-user-friends"></i>
                    <span>åœ¨çº¿ç”¨æˆ·: <span id="onlineUsers">156</span></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>ä»Šæ—¥è®¿é—®: <span id="todayVisits">2847</span></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-globe-americas"></i>
                    <span>æ€»è®¿é—®é‡: <span id="totalVisits">1256789</span></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heartbeat"></i>
                    <span>ç³»ç»ŸçŠ¶æ€: <span style="color: #228B22; font-weight: 600;">æ­£å¸¸</span></span>
                </div>
            </div>
        </header>

        <!-- ==================== æ§åˆ¶é¢æ¿ ==================== -->
        <div class="control-panel">
            <!-- æœç´¢åŠŸèƒ½åŒº -->
            <div class="search-box">
                <input type="text"
                       placeholder="æœç´¢ç³»ç»Ÿã€åŠŸèƒ½..."
                       id="searchInput"
                       autocomplete="off">
                <button onclick="filterSystems()" aria-label="æœç´¢">
                    <i class="fas fa-search-plus"></i>
                </button>
            </div>
            <!-- è§†å›¾åˆ‡æ¢æ§åˆ¶ -->
            <div class="view-controls">
                <button class="view-btn active" id="gridBtn" onclick="setViewMode('grid')" aria-label="ç½‘æ ¼è§†å›¾">
                    <i class="fas fa-th-large"></i> ç½‘æ ¼
                </button>
                <button class="view-btn" id="listBtn" onclick="setViewMode('list')" aria-label="åˆ—è¡¨è§†å›¾">
                    <i class="fas fa-list-ul"></i> åˆ—è¡¨
                </button>
            </div>
        </div>

        <!-- ==================== ç³»ç»Ÿåˆ—è¡¨å®¹å™¨ ==================== -->
        <div class="systems-container" id="systemsContainer">
            <!-- ç³»ç»Ÿå¡ç‰‡ç½‘æ ¼ï¼ˆé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆï¼‰ -->
            <div class="systems-grid" id="systemsGrid">
                <!-- ç³»ç»Ÿå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <!-- æ— æœç´¢ç»“æœæç¤º -->
            <div class="no-results" id="noResults" style="display: none;">
                <i class="fas fa-search-minus"></i>
                <h3>æœªæ‰¾åˆ°ç›¸å…³ç³»ç»Ÿ</h3>
                <p>è¯·å°è¯•å…¶ä»–å…³é”®è¯</p>
            </div>
        </div>

        <!-- ==================== é¡µè„šä¿¡æ¯ ==================== -->
        <footer class="footer">
            <div class="footer-info">
                <div class="footer-item">
                    <i class="fas fa-industry"></i>
                    <span>ç¥å†œé›†å›¢ä¿¡æ¯æŠ€æœ¯éƒ¨</span>
                </div>
                <div class="footer-item">
                    <i class="fas fa-phone-volume"></i>
                    <span>æŠ€æœ¯æ”¯æŒ: 400-888-8888</span>
                </div>
                <div class="footer-item">
                    <i class="fas fa-envelope-open-text"></i>
                    <span>support@farm-tech.com</span>
                </div>
                <div class="footer-item">
                    <i class="fas fa-clock"></i>
                    <span>æœ€åæ›´æ–°: <span id="lastUpdateTime"></span></span>
                </div>
            </div>
            <p>&copy; 2024 ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å° | ç‰ˆæƒæ‰€æœ‰ | äº¬ICPå¤‡xxxxxxxxå·</p>
        </footer>
    </div>

    <!-- ==================== AIåŠ©æ‰‹æµ®åŠ¨æŒ‰é’® ==================== -->
    <div class="ai-assistant">
        <button class="ai-button" onclick="toggleAISidebar()" aria-label="æ‰“å¼€AIåŠ©æ‰‹">
            <div class="pig-emoji">ğŸ·</div>
            <div class="ai-bubble">æˆ‘æ˜¯ç¥å†œæ™“é—® ğŸ·</div>
        </button>
    </div>

    <!-- ==================== AIå¯¹è¯ä¾§è¾¹æ  ==================== -->
    <div class="ai-sidebar" id="aiSidebar">
        <!-- AIåŠ©æ‰‹å¤´éƒ¨ä¿¡æ¯ -->
        <div class="ai-header">
            <div class="ai-avatar">ğŸ·</div>
            <div class="ai-info">
                <h3>ç¥å†œæ™“é—® ğŸ·</h3>
                <div class="ai-status">åœ¨çº¿ä¸­</div>
            </div>
            <button class="ai-close" onclick="closeAISidebar()" aria-label="å…³é—­AIåŠ©æ‰‹">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
        <div class="ai-chat-area" id="aiChatArea">
            <!-- åˆå§‹æ¬¢è¿æ¶ˆæ¯ -->
            <div class="chat-message">
                <div class="message-avatar ai">ğŸ·</div>
                <div>
                    <div class="message-content ai">
                        æ‚¨å¥½ï¼æˆ‘æ˜¯ç¥å†œæ™“é—®ï¼Œæ‚¨çš„ä¸“å±æ™ºèƒ½å†œç‰§åŠ©æ‰‹ï¼ğŸ·âœ¨<br><br>
                        æˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”å…³äºå†œç‰§ä¸šç”Ÿäº§ã€ç³»ç»Ÿæ“ä½œã€æ•°æ®åˆ†æç­‰å„ç§é—®é¢˜ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ
                    </div>
                    <div class="message-time">åˆšåˆš</div>
                </div>
            </div>
        </div>

        <!-- AIè¾“å…¥å’Œå¿«æ·å›å¤åŒºåŸŸ -->
        <div class="ai-input-area">
            <!-- å¿«æ·å›å¤æŒ‰é’®ç»„ -->
            <div class="quick-replies">
                <div class="quick-reply" onclick="sendQuickReply('ç”Ÿäº§ç®¡ç†')">ç”Ÿäº§ç®¡ç†</div>
                <div class="quick-reply" onclick="sendQuickReply('å…»æ®–æŠ€æœ¯')">å…»æ®–æŠ€æœ¯</div>
                <div class="quick-reply" onclick="sendQuickReply('æ•°æ®åˆ†æ')">æ•°æ®åˆ†æ</div>
                <div class="quick-reply" onclick="sendQuickReply('ç³»ç»Ÿå¸®åŠ©')">ç³»ç»Ÿå¸®åŠ©</div>
            </div>
            <!-- æ¶ˆæ¯è¾“å…¥å®¹å™¨ -->
            <div class="input-container">
                <textarea class="ai-input"
                          id="aiInput"
                          placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..."
                          rows="1"
                          onkeypress="handleAIKeyPress(event)"
                          oninput="autoResize(this)"
                          aria-label="è¾“å…¥æ¶ˆæ¯"></textarea>
                <button class="send-button" onclick="sendAIMessage()" aria-label="å‘é€æ¶ˆæ¯">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ==================== JavaScript åŠŸèƒ½å®ç° ==================== -->
    <script>
        /**
         * ==================== å…¨å±€å˜é‡å®šä¹‰ ====================
         */

        // ç³»ç»Ÿæ•°æ®é…ç½® - å­˜å‚¨æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿä¿¡æ¯
        let systems = [
            {
                id: 1,
                name: 'ç”Ÿäº§ç®¡ç†å¹³å°',
                description: 'ç•œç¦½å…»æ®–ç”Ÿäº§è¿‡ç¨‹ç›‘æ§ã€æ•°æ®ç»Ÿè®¡åˆ†æ',
                icon: 'fas fa-chart-area',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#', // TODO: æ›¿æ¢ä¸ºå®é™…ç³»ç»ŸURL
                favorited: false
            },
            {
                id: 2,
                name: 'æ™ºæ…§å…»æ®–ç³»ç»Ÿ',
                description: 'ç¯å¢ƒç›‘æ§ã€è‡ªåŠ¨æŠ•å–‚ã€å¥åº·ç®¡ç†',
                icon: 'fas fa-home',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: true
            },
            {
                id: 3,
                name: 'é¥²æ–™ç®¡ç†ç³»ç»Ÿ',
                description: 'é¥²æ–™é…æ–¹ã€åº“å­˜ç®¡ç†ã€è´¨é‡è¿½æº¯',
                icon: 'fas fa-seedling',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 4,
                name: 'å…½åŒ»æœåŠ¡å¹³å°',
                description: 'åŠ¨ç‰©å¥åº·ç›‘æµ‹ã€ç–«ç—…é˜²æ§ã€è¯Šç–—è®°å½•',
                icon: 'fas fa-user-md',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 5,
                name: 'æ™ºæ…§ç‰©æµç³»ç»Ÿ',
                description: 'è¿è¾“è°ƒåº¦ã€è·¯å¾„ä¼˜åŒ–ã€è´§ç‰©è·Ÿè¸ª',
                icon: 'fas fa-shipping-fast',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: true
            },
            {
                id: 6,
                name: 'é£Ÿå“å®‰å…¨è¿½æº¯',
                description: 'ä»å…»æ®–åˆ°é¤æ¡Œçš„å…¨é“¾æ¡è´¨é‡è¿½æº¯',
                icon: 'fas fa-shield-virus',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 7,
                name: 'è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ',
                description: 'æˆæœ¬æ ¸ç®—ã€æ”¶æ”¯ç®¡ç†ã€è´¢åŠ¡åˆ†æ',
                icon: 'fas fa-coins',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 8,
                name: 'äººåŠ›èµ„æºå¹³å°',
                description: 'å‘˜å·¥ç®¡ç†ã€è€ƒå‹¤ç»Ÿè®¡ã€è–ªé…¬è®¡ç®—',
                icon: 'fas fa-user-tie',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 9,
                name: 'ç¯ä¿ç›‘æµ‹ç³»ç»Ÿ',
                description: 'æ±¡æŸ“ç‰©ç›‘æµ‹ã€ç¯ä¿æ•°æ®ä¸ŠæŠ¥ã€æ²»ç†æ•ˆæœ',
                icon: 'fas fa-leaf',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 10,
                name: 'BIæ•°æ®åˆ†æ',
                description: 'æ•°æ®å¯è§†åŒ–ã€ç»è¥åˆ†æã€å†³ç­–æ”¯æŒ',
                icon: 'fas fa-chart-pie',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 11,
                name: 'é‡‡è´­ç®¡ç†å¹³å°',
                description: 'ä¾›åº”å•†ç®¡ç†ã€é‡‡è´­æµç¨‹ã€åˆåŒç®¡ç†',
                icon: 'fas fa-handshake',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            },
            {
                id: 12,
                name: 'ç§»åŠ¨åŠå…¬OA',
                description: 'å®¡æ‰¹æµç¨‹ã€æ–‡æ¡£ç®¡ç†ã€ç§»åŠ¨åŠå…¬',
                icon: 'fas fa-mobile-alt',
                status: 'æ­£å¸¸è¿è¡Œ',
                url: '#',
                favorited: false
            }
        ];

        // åº”ç”¨çŠ¶æ€å˜é‡
        let currentViewMode = 'grid'; // å½“å‰è§†å›¾æ¨¡å¼ï¼š'grid' æˆ– 'list'
        let statsTimer = null; // ç»Ÿè®¡ä¿¡æ¯æ›´æ–°å®šæ—¶å™¨
        let aiSidebarOpen = false; // AIä¾§è¾¹æ å¼€å¯çŠ¶æ€

        /**
         * ==================== é¡µé¢åˆå§‹åŒ– ====================
         */

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        /**
         * åº”ç”¨åˆå§‹åŒ–å‡½æ•°
         * è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ã€æ¸²æŸ“åˆå§‹å†…å®¹ã€å¯åŠ¨å®šæ—¶å™¨ç­‰
         */
        function initializeApp() {
            // æ¸²æŸ“ç³»ç»Ÿå¡ç‰‡
            renderSystems();

            // æ›´æ–°é¡µé¢æ—¶é—´ä¿¡æ¯
            updateLastUpdateTime();

            // å¯åŠ¨ç»Ÿè®¡æ•°æ®è‡ªåŠ¨æ›´æ–°
            startStatsUpdate();

            // è®¾ç½®æœç´¢æ¡†äº‹ä»¶ç›‘å¬
            setupSearchListeners();

            // è®¾ç½®é”®ç›˜å¿«æ·é”®
            setupKeyboardShortcuts();

            console.log('ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å°å·²åˆå§‹åŒ–å®Œæˆ');
        }

        /**
         * è®¾ç½®æœç´¢åŠŸèƒ½äº‹ä»¶ç›‘å¬å™¨
         */
        function setupSearchListeners() {
            const searchInput = document.getElementById('searchInput');

            // å®æ—¶æœç´¢ - è¾“å…¥æ—¶è§¦å‘
            searchInput.addEventListener('input', debounce(filterSystems, 300));

            // å›è½¦é”®æœç´¢
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    filterSystems();
                }
            });
        }

        /**
         * è®¾ç½®é”®ç›˜å¿«æ·é”®
         */
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl/Cmd + K æ‰“å¼€æœç´¢æ¡†
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }

                // ESC é”®å…³é—­AIä¾§è¾¹æ 
                if (e.key === 'Escape' && aiSidebarOpen) {
                    closeAISidebar();
                }
            });
        }

        /**
         * ==================== ç³»ç»Ÿå¡ç‰‡æ¸²æŸ“åŠŸèƒ½ ====================
         */

        /**
         * æ¸²æŸ“ç³»ç»Ÿå¡ç‰‡åˆ—è¡¨
         * @param {Array} filteredSystems - è¿‡æ»¤åçš„ç³»ç»Ÿåˆ—è¡¨ï¼Œä¸ºç©ºåˆ™æ˜¾ç¤ºå…¨éƒ¨
         */
        function renderSystems(filteredSystems = null) {
            const systemsGrid = document.getElementById('systemsGrid');
            const systemsToRender = filteredSystems || systems;

            // æ¸…ç©ºç°æœ‰å†…å®¹
            systemsGrid.innerHTML = '';

            // æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®
            if (systemsToRender.length === 0) {
                showNoResults();
                return;
            } else {
                hideNoResults();
            }

            // æ¸²æŸ“æ¯ä¸ªç³»ç»Ÿå¡ç‰‡
            systemsToRender.forEach((system, index) => {
                const systemCard = createSystemCard(system, index);
                systemsGrid.appendChild(systemCard);
            });

            // æ·»åŠ å¡ç‰‡å…¥åœºåŠ¨ç”»
            animateCardEntrance();
        }

        /**
         * åˆ›å»ºå•ä¸ªç³»ç»Ÿå¡ç‰‡DOMå…ƒç´ 
         * @param {Object} system - ç³»ç»Ÿä¿¡æ¯å¯¹è±¡
         * @param {number} index - å¡ç‰‡ç´¢å¼•ï¼ˆç”¨äºåŠ¨ç”»å»¶è¿Ÿï¼‰
         * @returns {HTMLElement} å¡ç‰‡DOMå…ƒç´ 
         */
        function createSystemCard(system, index) {
            const systemCard = document.createElement('div');
            systemCard.className = 'system-card';
            systemCard.style.animationDelay = `${index * 0.1}s`; // é”™å³°å…¥åœºåŠ¨ç”»

            // ç‚¹å‡»äº‹ä»¶ - æ‰“å¼€ç³»ç»Ÿ
            systemCard.onclick = () => openSystem(system);

            // è®¾ç½®å¡ç‰‡HTMLå†…å®¹
            systemCard.innerHTML = `
                <button class="favorite-btn ${system.favorited ? 'favorited' : ''}"
                        onclick="event.stopPropagation(); toggleFavorite(${system.id})"
                        aria-label="${system.favorited ? 'å–æ¶ˆæ”¶è—' : 'æ”¶è—'} ${system.name}">
                    <i class="fas fa-star"></i>
                </button>
                <div class="system-content">
                    <div class="system-icon">
                        <i class="${system.icon}"></i>
                    </div>
                    <h3 class="system-title">${escapeHtml(system.name)}</h3>
                    <p class="system-desc">${escapeHtml(system.description)}</p>
                    <div class="system-status">
                        <i class="fas fa-circle"></i>
                        <span>${escapeHtml(system.status)}</span>
                    </div>
                </div>
            `;

            return systemCard;
        }

        /**
         * æ˜¾ç¤ºæ— æœç´¢ç»“æœæç¤º
         */
        function showNoResults() {
            document.getElementById('noResults').style.display = 'block';
        }

        /**
         * éšè—æ— æœç´¢ç»“æœæç¤º
         */
        function hideNoResults() {
            document.getElementById('noResults').style.display = 'none';
        }

        /**
         * å¡ç‰‡å…¥åœºåŠ¨ç”»
         */
        function animateCardEntrance() {
            const cards = document.querySelectorAll('.system-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';

                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        /**
         * ==================== æœç´¢è¿‡æ»¤åŠŸèƒ½ ====================
         */

        /**
         * ç³»ç»Ÿæœç´¢è¿‡æ»¤å‡½æ•°
         * æ”¯æŒæŒ‰ç³»ç»Ÿåç§°å’Œæè¿°è¿›è¡Œæ¨¡ç³Šæœç´¢
         */
        function filterSystems() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase().trim();

            // å¦‚æœæœç´¢ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰ç³»ç»Ÿ
            if (!searchQuery) {
                renderSystems();
                return;
            }

            // æ‰§è¡Œæœç´¢è¿‡æ»¤
            const filteredSystems = systems.filter(system =>
                system.name.toLowerCase().includes(searchQuery) ||
                system.description.toLowerCase().includes(searchQuery)
            );

            // æ¸²æŸ“è¿‡æ»¤ç»“æœ
            renderSystems(filteredSystems);

            // è®°å½•æœç´¢è¡Œä¸ºï¼ˆç”¨äºæ•°æ®åˆ†æï¼‰
            logSearchAction(searchQuery, filteredSystems.length);
        }

        /**
         * è®°å½•æœç´¢è¡Œä¸º
         * @param {string} query - æœç´¢å…³é”®è¯
         * @param {number} resultCount - æœç´¢ç»“æœæ•°é‡
         */
        function logSearchAction(query, resultCount) {
            const searchLog = {
                query: query,
                resultCount: resultCount,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent
            };

            // TODO: å‘é€åˆ°åç«¯è¿›è¡Œæ•°æ®åˆ†æ
            console.log('æœç´¢è®°å½•:', searchLog);
        }

        /**
         * ==================== æ”¶è—åŠŸèƒ½ ====================
         */

        /**
         * åˆ‡æ¢ç³»ç»Ÿæ”¶è—çŠ¶æ€
         * @param {number} systemId - ç³»ç»ŸID
         */
        function toggleFavorite(systemId) {
            const system = systems.find(s => s.id === systemId);

            if (!system) {
                console.error('æœªæ‰¾åˆ°ç³»ç»Ÿ:', systemId);
                return;
            }

            // åˆ‡æ¢æ”¶è—çŠ¶æ€
            system.favorited = !system.favorited;

            // æ›´æ–°UI
            updateFavoriteButton(systemId, system.favorited);

            // ä¿å­˜æ”¶è—åˆ—è¡¨
            saveFavoritesToStorage();

            // æ˜¾ç¤ºæ“ä½œåé¦ˆ
            showToast(system.favorited ? `å·²æ”¶è— ${system.name}` : `å·²å–æ¶ˆæ”¶è— ${system.name}`);

            console.log(`ç³»ç»Ÿ ${system.name} æ”¶è—çŠ¶æ€: ${system.favorited}`);
        }

        /**
         * æ›´æ–°æ”¶è—æŒ‰é’®UIçŠ¶æ€
         * @param {number} systemId - ç³»ç»ŸID
         * @param {boolean} favorited - æ˜¯å¦å·²æ”¶è—
         */
        function updateFavoriteButton(systemId, favorited) {
            const favoriteBtn = document.querySelector(`[onclick*="toggleFavorite(${systemId})"]`);
            if (favoriteBtn) {
                favoriteBtn.className = `favorite-btn ${favorited ? 'favorited' : ''}`;
                favoriteBtn.setAttribute('aria-label',
                    `${favorited ? 'å–æ¶ˆæ”¶è—' : 'æ”¶è—'} ${systems.find(s => s.id === systemId)?.name}`
                );
            }
        }

        /**
         * ä¿å­˜æ”¶è—åˆ—è¡¨åˆ°æœ¬åœ°å­˜å‚¨
         */
        function saveFavoritesToStorage() {
            try {
                const favorites = systems.filter(s => s.favorited).map(s => s.id);
                localStorage.setItem('snFavorites', JSON.stringify(favorites));
            } catch (error) {
                console.warn('æ— æ³•ä¿å­˜æ”¶è—åˆ—è¡¨åˆ°æœ¬åœ°å­˜å‚¨:', error);
            }
        }

        /**
         * ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ”¶è—åˆ—è¡¨
         */
        function loadFavoritesFromStorage() {
            try {
                const savedFavorites = localStorage.getItem('snFavorites');
                if (savedFavorites) {
                    const favoriteIds = JSON.parse(savedFavorites);
                    systems.forEach(system => {
                        system.favorited = favoriteIds.includes(system.id);
                    });
                }
            } catch (error) {
                console.warn('æ— æ³•ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ”¶è—åˆ—è¡¨:', error);
            }
        }

        /**
         * ==================== ç³»ç»Ÿè®¿é—®åŠŸèƒ½ ====================
         */

        /**
         * æ‰“å¼€ç³»ç»Ÿ
         * @param {Object} system - ç³»ç»Ÿä¿¡æ¯å¯¹è±¡
         */
        function openSystem(system) {
            // è®°å½•è®¿é—®æ—¥å¿—
            recordSystemAccess(system);

            // æ£€æŸ¥ç³»ç»ŸURLæœ‰æ•ˆæ€§
            if (system.url && system.url !== '#') {
                // åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ç³»ç»Ÿ
                window.open(system.url, '_blank', 'noopener,noreferrer');
            } else {
                // ç³»ç»Ÿæš‚æœªé…ç½®URLï¼Œæ˜¾ç¤ºæç¤º
                showSystemComingSoon(system);
            }
        }

        /**
         * è®°å½•ç³»ç»Ÿè®¿é—®æ—¥å¿—
         * @param {Object} system - è¢«è®¿é—®çš„ç³»ç»Ÿ
         */
        function recordSystemAccess(system) {
            const accessLog = {
                systemId: system.id,
                systemName: system.name,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                referrer: document.referrer,
                sessionId: getSessionId()
            };

            // TODO: å‘é€è®¿é—®æ—¥å¿—åˆ°åç«¯
            console.log('ç³»ç»Ÿè®¿é—®è®°å½•:', accessLog);

            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateAccessStats();
        }

        /**
         * æ˜¾ç¤ºç³»ç»Ÿå³å°†ä¸Šçº¿æç¤º
         * @param {Object} system - ç³»ç»Ÿä¿¡æ¯
         */
        function showSystemComingSoon(system) {
            showToast(`${system.name} å³å°†ä¸Šçº¿ï¼Œæ•¬è¯·æœŸå¾…ï¼`, 'info');
        }

        /**
         * æ›´æ–°è®¿é—®ç»Ÿè®¡æ•°æ®
         */
        function updateAccessStats() {
            const todayVisitsEl = document.getElementById('todayVisits');
            const totalVisitsEl = document.getElementById('totalVisits');

            if (todayVisitsEl && totalVisitsEl) {
                const todayCount = parseInt(todayVisitsEl.textContent) + 1;
                const totalCount = parseInt(totalVisitsEl.textContent) + 1;

                todayVisitsEl.textContent = todayCount;
                totalVisitsEl.textContent = totalCount;

                // æ·»åŠ æ•°å­—å˜åŒ–åŠ¨ç”»
                animateCounterChange(todayVisitsEl);
                animateCounterChange(totalVisitsEl);
            }
        }

        /**
         * ==================== è§†å›¾æ¨¡å¼åˆ‡æ¢ ====================
         */

        /**
         * è®¾ç½®è§†å›¾æ¨¡å¼ï¼ˆç½‘æ ¼/åˆ—è¡¨ï¼‰
         * @param {string} mode - è§†å›¾æ¨¡å¼ï¼š'grid' æˆ– 'list'
         */
        function setViewMode(mode) {
            if (!['grid', 'list'].includes(mode)) {
                console.error('æ— æ•ˆçš„è§†å›¾æ¨¡å¼:', mode);
                return;
            }

            currentViewMode = mode;
            const systemsContainer = document.getElementById('systemsContainer');
            const gridBtn = document.getElementById('gridBtn');
            const listBtn = document.getElementById('listBtn');

            // æ›´æ–°å®¹å™¨æ ·å¼ç±»
            if (mode === 'list') {
                systemsContainer.classList.add('list-view');
                gridBtn.classList.remove('active');
                listBtn.classList.add('active');
            } else {
                systemsContainer.classList.remove('list-view');
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
            }

            // ä¿å­˜ç”¨æˆ·åå¥½åˆ°æœ¬åœ°å­˜å‚¨
            try {
                localStorage.setItem('snViewMode', mode);
            } catch (error) {
                console.warn('æ— æ³•ä¿å­˜è§†å›¾æ¨¡å¼åå¥½:', error);
            }

            // è®°å½•è§†å›¾åˆ‡æ¢è¡Œä¸º
            logViewModeChange(mode);
        }

        /**
         * è®°å½•è§†å›¾æ¨¡å¼åˆ‡æ¢è¡Œä¸º
         * @param {string} mode - æ–°çš„è§†å›¾æ¨¡å¼
         */
        function logViewModeChange(mode) {
            console.log('è§†å›¾æ¨¡å¼åˆ‡æ¢ä¸º:', mode);
            // TODO: å‘é€ç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ°åç«¯
        }

        /**
         * ==================== ç»Ÿè®¡ä¿¡æ¯æ›´æ–° ====================
         */

        /**
         * æ›´æ–°æœ€åæ›´æ–°æ—¶é—´æ˜¾ç¤º
         */
        function updateLastUpdateTime() {
            const lastUpdateTimeEl = document.getElementById('lastUpdateTime');
            if (lastUpdateTimeEl) {
                lastUpdateTimeEl.textContent = new Date().toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            }
        }

        /**
         * å¯åŠ¨ç»Ÿè®¡ä¿¡æ¯è‡ªåŠ¨æ›´æ–°å®šæ—¶å™¨
         */
        function startStatsUpdate() {
            // æ¸…é™¤å·²å­˜åœ¨çš„å®šæ—¶å™¨
            if (statsTimer) {
                clearInterval(statsTimer);
            }

            // æ¯10ç§’æ›´æ–°ä¸€æ¬¡ç»Ÿè®¡ä¿¡æ¯
            statsTimer = setInterval(() => {
                updateOnlineUsers();
                updateRandomVisits();
                updateLastUpdateTime();
            }, 10000);
        }

        /**
         * æ¨¡æ‹Ÿæ›´æ–°åœ¨çº¿ç”¨æˆ·æ•°
         */
        function updateOnlineUsers() {
            const onlineUsersEl = document.getElementById('onlineUsers');
            if (!onlineUsersEl) return;

            const currentUsers = parseInt(onlineUsersEl.textContent);
            // æ¨¡æ‹Ÿç”¨æˆ·æ•°å˜åŒ–ï¼ˆÂ±5èŒƒå›´å†…éšæœºå˜åŒ–ï¼‰
            const change = Math.floor(Math.random() * 11) - 5;
            const newUsers = Math.max(100, Math.min(300, currentUsers + change)); // é™åˆ¶åœ¨100-300ä¹‹é—´

            onlineUsersEl.textContent = newUsers;
            animateCounterChange(onlineUsersEl);
        }

        /**
         * æ¨¡æ‹Ÿéšæœºè®¿é—®é‡å¢åŠ 
         */
        function updateRandomVisits() {
            // 30%æ¦‚ç‡å¢åŠ è®¿é—®é‡
            if (Math.random() > 0.7) {
                updateAccessStats();
            }
        }

        /**
         * æ•°å­—å˜åŒ–åŠ¨ç”»æ•ˆæœ
         * @param {HTMLElement} element - è¦æ·»åŠ åŠ¨ç”»çš„å…ƒç´ 
         */
        function animateCounterChange(element) {
            element.style.transform = 'scale(1.1)';
            element.style.color = '#DC143C';

            setTimeout(() => {
                element.style.transform = 'scale(1)';
                element.style.color = '';
            }, 200);
        }

        /**
         * ==================== AIåŠ©æ‰‹åŠŸèƒ½ ====================
         */

        /**
         * åˆ‡æ¢AIä¾§è¾¹æ æ˜¾ç¤º/éšè—çŠ¶æ€
         */
        function toggleAISidebar() {
            const sidebar = document.getElementById('aiSidebar');
            aiSidebarOpen = !aiSidebarOpen;

            if (aiSidebarOpen) {
                // æ˜¾ç¤ºä¾§è¾¹æ 
                sidebar.classList.add('show');
                document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨

                // å»¶è¿Ÿèšç„¦è¾“å…¥æ¡†ï¼Œç­‰å¾…åŠ¨ç”»å®Œæˆ
                setTimeout(() => {
                    const input = document.getElementById('aiInput');
                    if (input) {
                        input.focus();
                    }
                }, 400);
            } else {
                // éšè—ä¾§è¾¹æ 
                sidebar.classList.remove('show');
                document.body.style.overflow = ''; // æ¢å¤èƒŒæ™¯æ»šåŠ¨
            }
        }

        /**
         * å…³é—­AIä¾§è¾¹æ 
         */
        function closeAISidebar() {
            const sidebar = document.getElementById('aiSidebar');
            sidebar.classList.remove('show');
            document.body.style.overflow = '';
            aiSidebarOpen = false;
        }

        /**
         * å¤„ç†AIè¾“å…¥æ¡†æŒ‰é”®äº‹ä»¶
         * @param {KeyboardEvent} event - é”®ç›˜äº‹ä»¶
         */
        function handleAIKeyPress(event) {
            // Enteré”®å‘é€æ¶ˆæ¯ï¼ˆShift+Enteræ¢è¡Œï¼‰
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendAIMessage();
            }
        }

        /**
         * è‡ªåŠ¨è°ƒæ•´æ–‡æœ¬æ¡†é«˜åº¦
         * @param {HTMLTextAreaElement} textarea - æ–‡æœ¬æ¡†å…ƒç´ 
         */
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        /**
         * å‘é€å¿«æ·å›å¤
         * @param {string} message - å¿«æ·å›å¤å†…å®¹
         */
        function sendQuickReply(message) {
            const input = document.getElementById('aiInput');
            input.value = message;
            sendAIMessage();
        }

        /**
         * å‘é€AIæ¶ˆæ¯
         */
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();

            // æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦ä¸ºç©º
            if (!message) {
                showToast('è¯·è¾“å…¥æ‚¨çš„é—®é¢˜', 'warning');
                return;
            }

            // æ£€æŸ¥æ¶ˆæ¯é•¿åº¦
            if (message.length > 500) {
                showToast('æ¶ˆæ¯é•¿åº¦ä¸èƒ½è¶…è¿‡500å­—ç¬¦', 'warning');
                return;
            }

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°èŠå¤©åŒºåŸŸ
            addAIMessage(message, 'user');

            // æ¸…ç©ºè¾“å…¥æ¡†å¹¶é‡ç½®é«˜åº¦
            input.value = '';
            input.style.height = 'auto';

            // æ˜¾ç¤ºAIæ€è€ƒçŠ¶æ€
            setTimeout(() => {
                addTypingIndicator();

                // æ¨¡æ‹ŸAIå“åº”å»¶è¿Ÿ
                setTimeout(() => {
                    removeTypingIndicator();
                    const aiResponse = generateAIResponse(message);
                    addAIMessage(aiResponse, 'ai');
                }, getRandomDelay(1000, 2500));
            }, 300);
        }

        /**
         * æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©åŒºåŸŸ
         * @param {string} message - æ¶ˆæ¯å†…å®¹
         * @param {string} sender - å‘é€è€…ç±»å‹ï¼š'user' æˆ– 'ai'
         */
        function addAIMessage(message, sender) {
            const chatArea = document.getElementById('aiChatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message' + (sender === 'user' ? ' user' : '');

            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });

            // æ„å»ºæ¶ˆæ¯HTML
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="message-avatar user">ğŸ‘¤</div>
                    <div>
                        <div class="message-content user">${escapeHtml(message)}</div>
                        <div class="message-time">${timeStr}</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-avatar ai">ğŸ·</div>
                    <div>
                        <div class="message-content ai">${message}</div>
                        <div class="message-time">${timeStr}</div>
                    </div>
                `;
            }

            chatArea.appendChild(messageDiv);

            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatArea.scrollTop = chatArea.scrollHeight;

            // è®°å½•æ¶ˆæ¯
            logAIMessage(message, sender);
        }

        /**
         * æ·»åŠ AIè¾“å…¥æŒ‡ç¤ºå™¨
         */
        function addTypingIndicator() {
            const chatArea = document.getElementById('aiChatArea');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-avatar ai">ğŸ·</div>
                <div class="message-content ai" style="padding: 16px;">
                    <div style="display: flex; gap: 4px; align-items: center;">
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #FF69B4; animation: typing 1.4s infinite ease-in-out;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #FF69B4; animation: typing 1.4s infinite ease-in-out 0.2s;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #FF69B4; animation: typing 1.4s infinite ease-in-out 0.4s;"></div>
                    </div>
                </div>
            `;

            // æ·»åŠ è¾“å…¥åŠ¨ç”»æ ·å¼
            if (!document.getElementById('typing-style')) {
                const style = document.createElement('style');
                style.id = 'typing-style';
                style.textContent = `
                    @keyframes typing {
                        0%, 60%, 100% { transform: translateY(0); opacity: 0.3; }
                        30% { transform: translateY(-10px); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }

            chatArea.appendChild(typingDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        /**
         * ç§»é™¤AIè¾“å…¥æŒ‡ç¤ºå™¨
         */
        function removeTypingIndicator() {
            const typingIndicator = document.querySelector('.typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        /**
         * ç”ŸæˆAIå“åº”å†…å®¹
         * @param {string} userMessage - ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯
         * @returns {string} AIå“åº”å†…å®¹
         */
        function generateAIResponse(userMessage) {
            // é¢„å®šä¹‰çš„å“åº”æ¨¡æ¿
            const responses = {
                'ç”Ÿäº§ç®¡ç†': `ğŸ­ <strong>ç”Ÿäº§ç®¡ç†å¹³å°</strong>åŠŸèƒ½å…¨é¢ï¼š<br><br>
                    â€¢ ç•œç¦½å…»æ®–å…¨æµç¨‹ç›‘æ§<br>
                    â€¢ ç”Ÿäº§æ•°æ®å®æ—¶ç»Ÿè®¡åˆ†æ<br>
                    â€¢ è‡ªåŠ¨åŒ–è®¾å¤‡çŠ¶æ€ç›‘æµ‹<br>
                    â€¢ ç”Ÿäº§æ•ˆç‡ä¼˜åŒ–å»ºè®®<br><br>
                    æ‚¨å¯ä»¥é€šè¿‡"ç”Ÿäº§ç®¡ç†å¹³å°"æ¨¡å—è®¿é—®è¯¦ç»†åŠŸèƒ½ï¼`,

                'å…»æ®–æŠ€æœ¯': `ğŸ® <strong>æ™ºæ…§å…»æ®–ç³»ç»Ÿ</strong>å¸®æ‚¨å®ç°ï¼š<br><br>
                    â€¢ ç¯å¢ƒå‚æ•°è‡ªåŠ¨ç›‘æ§<br>
                    â€¢ ç²¾å‡†æŠ•å–‚ç®¡ç†<br>
                    â€¢ åŠ¨ç‰©å¥åº·çŠ¶æ€è·Ÿè¸ª<br>
                    â€¢ ç–¾ç—…æ—©æœŸé¢„è­¦<br>
                    â€¢ ç”Ÿé•¿æ›²çº¿åˆ†æ<br><br>
                    é€šè¿‡"æ™ºæ…§å…»æ®–ç³»ç»Ÿ"å’Œ"å…½åŒ»æœåŠ¡å¹³å°"å¯ä»¥è·å¾—ä¸“ä¸šæŠ€æœ¯æ”¯æŒï¼`,

                'æ•°æ®åˆ†æ': `ğŸ“Š <strong>BIæ•°æ®åˆ†æå¹³å°</strong>æä¾›ï¼š<br><br>
                    â€¢ å¤šç»´åº¦æ•°æ®å¯è§†åŒ–<br>
                    â€¢ ç”Ÿäº§æ•ˆç‡æ·±åº¦åˆ†æ<br>
                    â€¢ æˆæœ¬æ§åˆ¶ç²¾å‡†è®¡ç®—<br>
                    â€¢ å¸‚åœºè¶‹åŠ¿é¢„æµ‹<br>
                    â€¢ æ™ºèƒ½å†³ç­–æ”¯æŒ<br><br>
                    ç‚¹å‡»"BIæ•°æ®åˆ†æ"æ¨¡å—å¼€å§‹æ‚¨çš„æ•°æ®æ´å¯Ÿä¹‹æ—…ï¼`,

                'ç³»ç»Ÿå¸®åŠ©': `ğŸ”§ <strong>ç³»ç»Ÿæ“ä½œæŒ‡å—</strong>ï¼š<br><br>
                    â€¢ é¦–é¡µå±•ç¤ºæ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿ<br>
                    â€¢ æœç´¢æ¡†å¯å¿«é€ŸæŸ¥æ‰¾åŠŸèƒ½<br>
                    â€¢ ç‚¹å‡»â­å¯æ”¶è—å¸¸ç”¨ç³»ç»Ÿ<br>
                    â€¢ ç½‘æ ¼/åˆ—è¡¨è§†å›¾éšæ„åˆ‡æ¢<br>
                    â€¢ æ‰€æœ‰æ•°æ®å®æ—¶åŒæ­¥æ›´æ–°<br><br>
                    å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘å“¦ï¼ğŸ·`,

                'é¥²æ–™': `ğŸŒ¾ <strong>é¥²æ–™ç®¡ç†ç³»ç»Ÿ</strong>åŠŸèƒ½ï¼š<br><br>
                    â€¢ ç§‘å­¦é…æ–¹ç®¡ç†<br>
                    â€¢ åº“å­˜é¢„è­¦æé†’<br>
                    â€¢ è´¨é‡è¿½æº¯ä½“ç³»<br>
                    â€¢ è¥å…»æˆåˆ†åˆ†æ<br>
                    â€¢ é‡‡è´­æˆæœ¬ä¼˜åŒ–<br><br>
                    é€šè¿‡"é¥²æ–™ç®¡ç†ç³»ç»Ÿ"æ¨¡å—å¯ä»¥å®ç°ç²¾ç»†åŒ–é¥²æ–™ç®¡ç†ï¼`,

                'è´¢åŠ¡': `ğŸ’° <strong>è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ</strong>åŒ…å«ï¼š<br><br>
                    â€¢ æˆæœ¬ç²¾ç¡®æ ¸ç®—<br>
                    â€¢ æ”¶æ”¯å…¨é¢ç®¡ç†<br>
                    â€¢ åˆ©æ¶¦åˆ†æé¢„æµ‹<br>
                    â€¢ èµ„é‡‘æµå‘ç›‘æ§<br>
                    â€¢ è´¢åŠ¡æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆ<br><br>
                    "è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ"è®©æ‚¨çš„æ¯ä¸€åˆ†é’±éƒ½æ¸…æ¸…æ¥šæ¥šï¼`,

                'ç¯ä¿': `ğŸŒ¿ <strong>ç¯ä¿ç›‘æµ‹ç³»ç»Ÿ</strong>ç‰¹è‰²ï¼š<br><br>
                    â€¢ æ±¡æŸ“ç‰©å®æ—¶ç›‘æµ‹<br>
                    â€¢ ç¯ä¿æ•°æ®è‡ªåŠ¨ä¸ŠæŠ¥<br>
                    â€¢ æ²»ç†æ•ˆæœè¯„ä¼°<br>
                    â€¢ åˆè§„é£é™©é¢„è­¦<br>
                    â€¢ ç»¿è‰²ç”Ÿäº§æŒ‡å¯¼<br><br>
                    "ç¯ä¿ç›‘æµ‹ç³»ç»Ÿ"åŠ©æ‚¨å®ç°å¯æŒç»­å‘å±•ï¼`,

                'ä½ å¥½': `æ‚¨å¥½ï¼å¾ˆé«˜å…´è§åˆ°æ‚¨ï¼ğŸ·âœ¨<br><br>
                    æˆ‘æ˜¯ç¥å†œæ™“é—®ï¼Œæ‚¨çš„ä¸“å±æ™ºèƒ½å†œç‰§åŠ©æ‰‹ã€‚æˆ‘ç²¾é€šï¼š<br><br>
                    ğŸ”¹ ç•œç‰§å…»æ®–æŠ€æœ¯<br>
                    ğŸ”¹ å†œä¸šç”Ÿäº§ç®¡ç†<br>
                    ğŸ”¹ æ•°æ®åˆ†æè§£è¯»<br>
                    ğŸ”¹ ç³»ç»Ÿæ“ä½œæŒ‡å¯¼<br>
                    ğŸ”¹ æ”¿ç­–æ³•è§„å’¨è¯¢<br><br>
                    æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é—®æˆ‘ï¼Œæˆ‘ä¼šç«­è¯šä¸ºæ‚¨æœåŠ¡ï¼`,

                'å¸®åŠ©': `ğŸ†˜ æˆ‘èƒ½ä¸ºæ‚¨æä¾›çš„æœåŠ¡ï¼š<br><br>
                    ğŸ“‹ <strong>ç³»ç»Ÿæ“ä½œ</strong><br>
                    â€¢ åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨æŒ‡å¯¼<br>
                    â€¢ å¸¸è§é—®é¢˜è§£ç­”<br><br>
                    ğŸ¯ <strong>ä¸“ä¸šå’¨è¯¢</strong><br>
                    â€¢ å…»æ®–æŠ€æœ¯å»ºè®®<br>
                    â€¢ ç”Ÿäº§ç®¡ç†ä¼˜åŒ–<br>
                    â€¢ æ•°æ®åˆ†æè§£è¯»<br><br>
                    ğŸ“ <strong>æŠ€æœ¯æ”¯æŒ</strong><br>
                    â€¢ è®¾å¤‡æ•…éšœè¯Šæ–­<br>
                    â€¢ ç³»ç»Ÿå¼‚å¸¸å¤„ç†<br><br>
                    è¯·å‘Šè¯‰æˆ‘æ‚¨å…·ä½“éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼`
            };

            // æ£€æŸ¥æ˜¯å¦åŒ¹é…é¢„å®šä¹‰å…³é”®è¯
            for (let keyword in responses) {
                if (userMessage.includes(keyword)) {
                    return responses[keyword];
                }
            }

            // é»˜è®¤å“åº”
            return `ğŸ· æ„Ÿè°¢æ‚¨çš„æé—®ï¼ä½œä¸ºç¥å†œé›†å›¢çš„AIåŠ©æ‰‹ï¼Œæˆ‘æ­£åœ¨åŠªåŠ›ç†è§£æ‚¨çš„éœ€æ±‚ã€‚<br><br>
                æ‚¨å¯ä»¥å°è¯•è¯¢é—®å…³äºï¼š<br>
                â€¢ ç”Ÿäº§ç®¡ç† â€¢ å…»æ®–æŠ€æœ¯<br>
                â€¢ æ•°æ®åˆ†æ â€¢ ç³»ç»Ÿæ“ä½œ<br>
                â€¢ è´¢åŠ¡ç®¡ç† â€¢ ç¯ä¿ç›‘æµ‹<br><br>
                æˆ–è€…ç›´æ¥å‘Šè¯‰æˆ‘æ‚¨æƒ³äº†è§£å“ªä¸ªå…·ä½“ç³»ç»Ÿçš„åŠŸèƒ½ï¼`;
        }

        /**
         * è®°å½•AIå¯¹è¯æ¶ˆæ¯
         * @param {string} message - æ¶ˆæ¯å†…å®¹
         * @param {string} sender - å‘é€è€…ç±»å‹
         */
        function logAIMessage(message, sender) {
            const messageLog = {
                message: message,
                sender: sender,
                timestamp: new Date().toISOString(),
                sessionId: getSessionId()
            };

            // TODO: å‘é€åˆ°åç«¯è¿›è¡ŒAIå¯¹è¯åˆ†æ
            console.log('AIå¯¹è¯è®°å½•:', messageLog);
        }

        /**
         * ==================== å·¥å…·å‡½æ•° ====================
         */

        /**
         * HTMLè½¬ä¹‰å‡½æ•°ï¼Œé˜²æ­¢XSSæ”»å‡»
         * @param {string} text - è¦è½¬ä¹‰çš„æ–‡æœ¬
         * @returns {string} è½¬ä¹‰åçš„æ–‡æœ¬
         */
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, function(m) { return map[m]; });
        }

        /**
         * é˜²æŠ–å‡½æ•° - é˜²æ­¢é¢‘ç¹è§¦å‘äº‹ä»¶
         * @param {Function} func - è¦æ‰§è¡Œçš„å‡½æ•°
         * @param {number} wait - ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
         * @returns {Function} é˜²æŠ–åçš„å‡½æ•°
         */
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        /**
         * è·å–éšæœºå»¶è¿Ÿæ—¶é—´
         * @param {number} min - æœ€å°å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
         * @param {number} max - æœ€å¤§å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
         * @returns {number} éšæœºå»¶è¿Ÿæ—¶é—´
         */
        function getRandomDelay(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * è·å–ä¼šè¯IDï¼ˆç”¨äºç”¨æˆ·è¡Œä¸ºè·Ÿè¸ªï¼‰
         * @returns {string} ä¼šè¯ID
         */
        function getSessionId() {
            let sessionId = sessionStorage.getItem('snSessionId');
            if (!sessionId) {
                sessionId = 'sn_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                sessionStorage.setItem('snSessionId', sessionId);
            }
            return sessionId;
        }

        /**
         * æ˜¾ç¤ºToastæç¤ºæ¶ˆæ¯
         * @param {string} message - æç¤ºæ¶ˆæ¯
         * @param {string} type - æ¶ˆæ¯ç±»å‹ï¼š'success', 'error', 'warning', 'info'
         */
        function showToast(message, type = 'success') {
            // åˆ›å»ºToastå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                max-width: 300px;
                word-wrap: break-word;
            `;

            // è®¾ç½®ä¸åŒç±»å‹çš„èƒŒæ™¯è‰²
            const colors = {
                success: '#10b981',
                error: '#ef4444',
                warning: '#f59e0b',
                info: '#3b82f6'
            };
            toast.style.background = colors[type] || colors.success;

            toast.textContent = message;
            document.body.appendChild(toast);

            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);

            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        /**
         * ==================== é”™è¯¯å¤„ç†å’Œç›‘æ§ ====================
         */

        /**
         * å…¨å±€é”™è¯¯å¤„ç†
         */
        window.addEventListener('error', function(event) {
            console.error('é¡µé¢é”™è¯¯:', event.error);
            // TODO: å‘é€é”™è¯¯ä¿¡æ¯åˆ°åç«¯ç›‘æ§ç³»ç»Ÿ
        });

        /**
         * Promiseå¼‚å¸¸å¤„ç†
         */
        window.addEventListener('unhandledrejection', function(event) {
            console.error('æœªå¤„ç†çš„Promiseå¼‚å¸¸:', event.reason);
            // TODO: å‘é€é”™è¯¯ä¿¡æ¯åˆ°åç«¯ç›‘æ§ç³»ç»Ÿ
        });

        /**
         * ==================== é¡µé¢å¸è½½å¤„ç† ====================
         */

        /**
         * é¡µé¢å¸è½½æ—¶çš„æ¸…ç†å·¥ä½œ
         */
        window.addEventListener('beforeunload', function() {
            // æ¸…ç†å®šæ—¶å™¨
            if (statsTimer) {
                clearInterval(statsTimer);
                statsTimer = null;
            }

            // å‘é€é¡µé¢å¸è½½äº‹ä»¶
            logPageUnload();
        });

        /**
         * è®°å½•é¡µé¢å¸è½½äº‹ä»¶
         */
        function logPageUnload() {
            const unloadLog = {
                timestamp: new Date().toISOString(),
                sessionId: getSessionId(),
                timeSpent: Date.now() - performance.timing.navigationStart
            };

            // ä½¿ç”¨sendBeaconç¡®ä¿æ•°æ®å‘é€
            if (navigator.sendBeacon) {
                // TODO: æ›¿æ¢ä¸ºå®é™…çš„æ•°æ®æ”¶é›†ç«¯ç‚¹
                // navigator.sendBeacon('/api/analytics/unload', JSON.stringify(unloadLog));
            }

            console.log('é¡µé¢å¸è½½è®°å½•:', unloadLog);
        }

        /**
         * ==================== æ€§èƒ½ç›‘æ§ ====================
         */

        /**
         * é¡µé¢æ€§èƒ½ç›‘æ§
         */
        window.addEventListener('load', function() {
            // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½åå†æ”¶é›†æ€§èƒ½æ•°æ®
            setTimeout(() => {
                const perfData = {
                    // é¡µé¢åŠ è½½æ—¶é—´
                    loadTime: performance.timing.loadEventEnd - performance.timing.navigationStart,
                    // DOMå‡†å¤‡æ—¶é—´
                    domReady: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart,
                    // é¦–å±æ¸²æŸ“æ—¶é—´
                    firstPaint: performance.getEntriesByType('paint')[0]?.startTime || 0,
                    // æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´
                    largestContentfulPaint: 0,
                    // ç´¯è®¡å¸ƒå±€åç§»
                    cumulativeLayoutShift: 0
                };

                // æ”¶é›†LCPæ•°æ®
                if ('PerformanceObserver' in window) {
                    try {
                        const lcpObserver = new PerformanceObserver((entryList) => {
                            const entries = entryList.getEntries();
                            if (entries.length > 0) {
                                perfData.largestContentfulPaint = entries[entries.length - 1].startTime;
                            }
                        });
                        lcpObserver.observe({entryTypes: ['largest-contentful-paint']});

                        // æ”¶é›†CLSæ•°æ®
                        const clsObserver = new PerformanceObserver((entryList) => {
                            for (const entry of entryList.getEntries()) {
                                if (!entry.hadRecentInput) {
                                    perfData.cumulativeLayoutShift += entry.value;
                                }
                            }
                        });
                        clsObserver.observe({entryTypes: ['layout-shift']});
                    } catch (error) {
                        console.warn('æ€§èƒ½ç›‘æ§åˆå§‹åŒ–å¤±è´¥:', error);
                    }
                }

                // TODO: å‘é€æ€§èƒ½æ•°æ®åˆ°åç«¯
                console.log('é¡µé¢æ€§èƒ½æ•°æ®:', perfData);
            }, 1000);
        });

        /**
         * ==================== ä»£ç å®¡æŸ¥æ³¨é‡Šå’Œæ”¹è¿›å»ºè®® ====================
         */

        /*
        ========================================
        CODE REVIEW æ€»ç»“å’Œæ”¹è¿›å»ºè®®ï¼š
        ========================================

        âœ… ä¼˜ç‚¹ï¼š
        1. ä»£ç ç»“æ„æ¸…æ™°ï¼ŒåŠŸèƒ½æ¨¡å—åŒ–
        2. æ³¨é‡Šè¯¦ç»†ï¼Œä¾¿äºç»´æŠ¤
        3. é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„
        4. å“åº”å¼è®¾è®¡è‰¯å¥½
        5. ç”¨æˆ·ä½“éªŒè€ƒè™‘å‘¨åˆ°
        6. æ€§èƒ½ç›‘æ§å®Œå¤‡

        ğŸ”§ ä¸»è¦æ”¹è¿›ï¼š
        1. æ·»åŠ äº†å®Œæ•´çš„JSDocæ³¨é‡Š
        2. å¢å¼ºäº†é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
        3. ä¼˜åŒ–äº†æœç´¢åŠŸèƒ½ï¼ˆé˜²æŠ–ã€é˜²XSSï¼‰
        4. æ”¹è¿›äº†AIå¯¹è¯ä½“éªŒ
        5. æ·»åŠ äº†æ€§èƒ½ç›‘æ§
        6. å¢å¼ºäº†å¯è®¿é—®æ€§ï¼ˆaria-labelç­‰ï¼‰
        7. ä¼˜åŒ–äº†åŠ¨ç”»æ•ˆæœ
        8. æ”¹è¿›äº†ä»£ç ç»„ç»‡ç»“æ„

        âš ï¸ æ½œåœ¨é—®é¢˜å’Œå»ºè®®ï¼š
        1. ç³»ç»ŸURLéƒ½æ˜¯'#'ï¼Œéœ€è¦é…ç½®å®é™…åœ°å€
        2. localStorage/sessionStorageéœ€è¦é”™è¯¯å¤„ç†
        3. éœ€è¦å®ç°åç«¯APIé›†æˆ
        4. å»ºè®®æ·»åŠ å›½é™…åŒ–æ”¯æŒ
        5. è€ƒè™‘æ·»åŠ PWAæ”¯æŒ
        6. å»ºè®®å®ç°æ›´å¤æ‚çš„AIå¯¹è¯é€»è¾‘
        7. éœ€è¦æ·»åŠ å•å…ƒæµ‹è¯•
        8. è€ƒè™‘ä½¿ç”¨TypeScriptæé«˜ä»£ç è´¨é‡

        ğŸš€ ç”Ÿäº§ç¯å¢ƒå»ºè®®ï¼š
        1. å‹ç¼©CSSå’ŒJavaScript
        2. ä½¿ç”¨CDNåŠ é€Ÿèµ„æºåŠ è½½
        3. å®ç°æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
        4. æ·»åŠ å®‰å…¨å¤´éƒ¨é…ç½®
        5. å®ç°APIé™æµå’Œé˜²çˆ¬è™«
        6. é…ç½®ç›‘æ§å‘Šè­¦ç³»ç»Ÿ
        7. æ·»åŠ A/Bæµ‹è¯•åŠŸèƒ½
        8. å®ç°ç”¨æˆ·è¡Œä¸ºåˆ†æ
        */

        // å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•å·¥å…·
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            // å¼€å‘æ¨¡å¼ç‰¹æœ‰åŠŸèƒ½
            window.snDebug = {
                systems: systems,
                resetFavorites: () => {
                    systems.forEach(s => s.favorited = false);
                    renderSystems();
                    localStorage.removeItem('snFavorites');
                },
                simulateError: () => {
                    throw new Error('æ¨¡æ‹Ÿé”™è¯¯ç”¨äºæµ‹è¯•');
                },
                getSessionInfo: () => ({
                    sessionId: getSessionId(),
                    viewMode: currentViewMode,
                    aiSidebarOpen: aiSidebarOpen
                })
            };
            console.log('ğŸ· ç¥å†œé›†å›¢æ•°å­—åŒ–å¹³å° - å¼€å‘æ¨¡å¼å·²å¯ç”¨');
            console.log('ğŸ”§ è°ƒè¯•å·¥å…·å¯é€šè¿‡ window.snDebug è®¿é—®');
        }

    </script>
</body>
</html>