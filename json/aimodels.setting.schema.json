{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Models Configuration",
  "description": "神农晓问AI助手配置文件Schema",
  "type": "object",
  "required": ["models", "systemPrompt"],
  "properties": {
    "models": {
      "type": "array",
      "description": "可用的AI模型列表",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "name", "provider"],
        "properties": {
          "id": {
            "type": "string",
            "description": "模型唯一标识符",
            "pattern": "^[a-zA-Z0-9_-]+$"
          },
          "name": {
            "type": "string",
            "description": "模型显示名称",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "description": "模型描述"
          },
          "provider": {
            "type": "string",
            "description": "模型提供商",
            "enum": ["shengnong", "openai", "anthropic", "meta", "google", "other"]
          },
          "maxTokens": {
            "type": "integer",
            "description": "最大令牌数",
            "minimum": 100,
            "maximum": 32000,
            "default": 2000
          },
          "temperature": {
            "type": "number",
            "description": "温度参数(0-2)",
            "minimum": 0,
            "maximum": 2,
            "default": 0.7
          },
          "isDefault": {
            "type": "boolean",
            "description": "是否为默认模型",
            "default": false
          },
          "icon": {
            "type": "string",
            "description": "模型图标（emoji）"
          },
          "features": {
            "type": "array",
            "description": "模型特性列表",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "systemPrompt": {
      "type": "string",
      "description": "系统提示词，定义AI助手的角色和行为",
      "minLength": 10
    },
    "quickReplies": {
      "type": "array",
      "description": "快捷回复配置",
      "items": {
        "type": "object",
        "required": ["category", "label", "replies"],
        "properties": {
          "category": {
            "type": "string",
            "description": "类别标识符",
            "pattern": "^[a-zA-Z0-9_-]+$"
          },
          "label": {
            "type": "string",
            "description": "类别显示名称"
          },
          "icon": {
            "type": "string",
            "description": "类别图标（emoji）"
          },
          "replies": {
            "type": "array",
            "description": "快捷回复文本列表",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          }
        }
      }
    },
    "apiConfig": {
      "type": "object",
      "description": "API配置",
      "properties": {
        "baseURL": {
          "type": "string",
          "description": "API基础URL",
          "format": "uri"
        },
        "timeout": {
          "type": "integer",
          "description": "请求超时时间（毫秒）",
          "minimum": 1000,
          "maximum": 120000,
          "default": 30000
        },
        "retryConfig": {
          "type": "object",
          "description": "重试配置",
          "properties": {
            "maxRetries": {
              "type": "integer",
              "description": "最大重试次数",
              "minimum": 0,
              "maximum": 10,
              "default": 3
            },
            "baseDelay": {
              "type": "integer",
              "description": "基础延迟（毫秒）",
              "minimum": 100,
              "default": 1000
            },
            "maxDelay": {
              "type": "integer",
              "description": "最大延迟（毫秒）",
              "minimum": 1000,
              "default": 10000
            },
            "retryableStatuses": {
              "type": "array",
              "description": "可重试的HTTP状态码",
              "items": {
                "type": "integer"
              },
              "default": [429, 500, 502, 503, 504]
            }
          }
        },
        "rateLimiting": {
          "type": "object",
          "description": "速率限制配置",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "maxRequestsPerMinute": {
              "type": "integer",
              "minimum": 1
            },
            "maxRequestsPerHour": {
              "type": "integer",
              "minimum": 1
            }
          }
        }
      }
    },
    "uiConfig": {
      "type": "object",
      "description": "UI配置",
      "properties": {
        "assistantName": {
          "type": "string",
          "description": "助手名称"
        },
        "assistantNickname": {
          "type": "string",
          "description": "助手昵称"
        },
        "assistantAvatar": {
          "type": "string",
          "description": "助手头像（emoji）"
        },
        "userAvatar": {
          "type": "string",
          "description": "用户头像（emoji）"
        },
        "theme": {
          "type": "object",
          "description": "主题配置",
          "properties": {
            "primaryColor": {
              "type": "string",
              "description": "主色调",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "secondaryColor": {
              "type": "string",
              "description": "辅助色",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "accentColor": {
              "type": "string",
              "description": "强调色",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "successColor": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "warningColor": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "errorColor": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "infoColor": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            }
          }
        },
        "welcomeMessage": {
          "type": "string",
          "description": "欢迎消息（支持HTML）"
        },
        "placeholderText": {
          "type": "string",
          "description": "输入框占位符文本"
        },
        "features": {
          "type": "object",
          "description": "功能开关",
          "properties": {
            "voiceInput": {
              "type": "boolean",
              "default": false
            },
            "imageUpload": {
              "type": "boolean",
              "default": false
            },
            "fileUpload": {
              "type": "boolean",
              "default": false
            },
            "codeHighlight": {
              "type": "boolean",
              "default": true
            },
            "markdown": {
              "type": "boolean",
              "default": true
            },
            "exportChat": {
              "type": "boolean",
              "default": true
            },
            "searchHistory": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "animations": {
          "type": "object",
          "description": "动画配置",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "messageSlide": {
              "type": "boolean",
              "default": true
            },
            "typingEffect": {
              "type": "boolean",
              "default": true
            },
            "buttonHover": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "notifications": {
          "type": "object",
          "description": "通知配置",
          "properties": {
            "position": {
              "type": "string",
              "enum": ["top-left", "top-right", "bottom-left", "bottom-right"],
              "default": "top-right"
            },
            "duration": {
              "type": "integer",
              "minimum": 1000,
              "maximum": 10000,
              "default": 3000
            },
            "maxStack": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "default": 3
            }
          }
        }
      }
    },
    "contextConfig": {
      "type": "object",
      "description": "上下文配置",
      "properties": {
        "maxHistory": {
          "type": "integer",
          "description": "最大历史消息数",
          "minimum": 1,
          "maximum": 100,
          "default": 10
        },
        "contextWindow": {
          "type": "integer",
          "description": "上下文窗口大小（tokens）",
          "minimum": 1000,
          "maximum": 128000,
          "default": 4000
        },
        "summarizeThreshold": {
          "type": "integer",
          "description": "触发摘要的阈值",
          "minimum": 1,
          "default": 8
        },
        "autoSummarize": {
          "type": "boolean",
          "description": "是否自动摘要",
          "default": false
        }
      }
    },
    "featureFlags": {
      "type": "object",
      "description": "功能开关",
      "properties": {
        "enableVoiceInput": {
          "type": "boolean",
          "default": false
        },
        "enableImageAnalysis": {
          "type": "boolean",
          "default": false
        },
        "enableMultiLanguage": {
          "type": "boolean",
          "default": false
        },
        "enableAdvancedAnalytics": {
          "type": "boolean",
          "default": true
        },
        "enableCustomPrompts": {
          "type": "boolean",
          "default": true
        },
        "enableFeedback": {
          "type": "boolean",
          "default": true
        }
      }
    },
    "analytics": {
      "type": "object",
      "description": "分析配置",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "trackConversations": {
          "type": "boolean",
          "default": false
        },
        "trackUserSatisfaction": {
          "type": "boolean",
          "default": false
        },
        "trackResponseTime": {
          "type": "boolean",
          "default": false
        },
        "trackErrors": {
          "type": "boolean",
          "default": false
        }
      }
    },
    "version": {
      "type": "string",
      "description": "配置文件版本",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "lastUpdated": {
      "type": "string",
      "description": "最后更新时间",
      "format": "date-time"
    },
    "author": {
      "type": "string",
      "description": "作者"
    },
    "description": {
      "type": "string",
      "description": "配置文件描述"
    }
  }
}